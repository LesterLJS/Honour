{"ast":null,"code":"/**\r\n * User: Get images uploaded by the current user\r\n * @returns {Promise} - API response with user's images\r\n */\nimport api from '../api/index'; // Importing the api instance\nimport { jwtDecode } from 'jwt-decode'; // Importing jwtDecode for decoding tokens\nimport { refreshAccessToken } from './auth'; // Importing refreshAccessToken function\n\nexport const getMyImages = () => {\n  return api.get('/api/images/my-images/'); // Adjust the endpoint as necessary\n};\nexport const getImageUrl = imageId => {\n  // Return URL without the token as a query parameter\n  return `${api.defaults.baseURL}/api/images/${imageId}/file/`;\n};\nexport const loadImage = async imageId => {\n  try {\n    // Get the token\n    const token = localStorage.getItem('access_token');\n    if (!token) {\n      throw new Error('No access token found');\n    }\n\n    // Fetch the image with the Authorization header\n    const response = await fetch(`${api.defaults.baseURL}/api/images/${imageId}/file/`, {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    if (!response.ok) {\n      throw new Error(`Failed to load image: ${response.status}`);\n    }\n\n    // Create Blob URL\n    const blob = await response.blob();\n    return URL.createObjectURL(blob);\n  } catch (error) {\n    console.error(`Error loading image ${imageId}:`, error);\n    return ''; // Return empty string on failure\n  }\n};\n\n/**\r\n * Upload an image to the server\r\n * @param {File} imageFile - The image file to upload\r\n * @returns {Promise} - API response with the uploaded image data\r\n */\nexport const uploadImage = imageFile => {\n  const formData = new FormData();\n  formData.append('file', imageFile);\n  return api.post('/api/images/upload/', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n};\n\n/**\r\n * Admin: Get recently verified images\r\n * @returns {Promise} - API response with recently verified images\r\n */\nexport const getVerifiedImages = () => {\n  return api.get('/api/images/admin/images/verified/');\n};\n\n/**\r\n * Admin: Get all images from all users\r\n * @returns {Promise} - API response with all images\r\n */\nexport const getAllImages = () => {\n  return api.get('/api/images/admin/images/');\n};\n\n/**\r\n * Admin: Delete an image\r\n * @param {number} imageId - The ID of the image to delete\r\n * @returns {Promise} - API response confirming deletion\r\n */\nexport const deleteImage = imageId => {\n  return api.delete(`/api/images/admin/images/${imageId}/`);\n};","map":{"version":3,"names":["api","jwtDecode","refreshAccessToken","getMyImages","get","getImageUrl","imageId","defaults","baseURL","loadImage","token","localStorage","getItem","Error","response","fetch","headers","ok","status","blob","URL","createObjectURL","error","console","uploadImage","imageFile","formData","FormData","append","post","getVerifiedImages","getAllImages","deleteImage","delete"],"sources":["F:/MyProject/frontend/src/api/images.js"],"sourcesContent":["/**\r\n * User: Get images uploaded by the current user\r\n * @returns {Promise} - API response with user's images\r\n */\r\nimport api from '../api/index'; // Importing the api instance\r\nimport { jwtDecode } from 'jwt-decode'; // Importing jwtDecode for decoding tokens\r\nimport { refreshAccessToken } from './auth'; // Importing refreshAccessToken function\r\n\r\nexport const getMyImages = () => {\r\n  return api.get('/api/images/my-images/'); // Adjust the endpoint as necessary\r\n};\r\nexport const getImageUrl = (imageId) => {\r\n  // Return URL without the token as a query parameter\r\n  return `${api.defaults.baseURL}/api/images/${imageId}/file/`;\r\n};\r\n\r\nexport const loadImage = async (imageId) => {\r\n  try {\r\n    // Get the token\r\n    const token = localStorage.getItem('access_token');\r\n    if (!token) {\r\n      throw new Error('No access token found');\r\n    }\r\n\r\n    // Fetch the image with the Authorization header\r\n    const response = await fetch(`${api.defaults.baseURL}/api/images/${imageId}/file/`, {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to load image: ${response.status}`);\r\n    }\r\n\r\n    // Create Blob URL\r\n    const blob = await response.blob();\r\n    return URL.createObjectURL(blob);\r\n  } catch (error) {\r\n    console.error(`Error loading image ${imageId}:`, error);\r\n    return ''; // Return empty string on failure\r\n  }\r\n};\r\n\r\n\r\n\r\n/**\r\n * Upload an image to the server\r\n * @param {File} imageFile - The image file to upload\r\n * @returns {Promise} - API response with the uploaded image data\r\n */\r\nexport const uploadImage = (imageFile) => {\r\n  const formData = new FormData();\r\n  formData.append('file', imageFile);\r\n  return api.post('/api/images/upload/', formData, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n    },\r\n  });\r\n};\r\n\r\n\r\n/**\r\n * Admin: Get recently verified images\r\n * @returns {Promise} - API response with recently verified images\r\n */\r\nexport const getVerifiedImages = () => {\r\n  return api.get('/api/images/admin/images/verified/');\r\n};\r\n\r\n\r\n/**\r\n * Admin: Get all images from all users\r\n * @returns {Promise} - API response with all images\r\n */\r\nexport const getAllImages = () => {\r\n  return api.get('/api/images/admin/images/');\r\n};\r\n\r\n/**\r\n * Admin: Delete an image\r\n * @param {number} imageId - The ID of the image to delete\r\n * @returns {Promise} - API response confirming deletion\r\n */\r\nexport const deleteImage = (imageId) => {\r\n  return api.delete(`/api/images/admin/images/${imageId}/`);\r\n};\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,GAAG,MAAM,cAAc,CAAC,CAAC;AAChC,SAASC,SAAS,QAAQ,YAAY,CAAC,CAAC;AACxC,SAASC,kBAAkB,QAAQ,QAAQ,CAAC,CAAC;;AAE7C,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAC/B,OAAOH,GAAG,CAACI,GAAG,CAAC,wBAAwB,CAAC,CAAC,CAAC;AAC5C,CAAC;AACD,OAAO,MAAMC,WAAW,GAAIC,OAAO,IAAK;EACtC;EACA,OAAO,GAAGN,GAAG,CAACO,QAAQ,CAACC,OAAO,eAAeF,OAAO,QAAQ;AAC9D,CAAC;AAED,OAAO,MAAMG,SAAS,GAAG,MAAOH,OAAO,IAAK;EAC1C,IAAI;IACF;IACA,MAAMI,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAClD,IAAI,CAACF,KAAK,EAAE;MACV,MAAM,IAAIG,KAAK,CAAC,uBAAuB,CAAC;IAC1C;;IAEA;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGf,GAAG,CAACO,QAAQ,CAACC,OAAO,eAAeF,OAAO,QAAQ,EAAE;MAClFU,OAAO,EAAE;QACP,eAAe,EAAE,UAAUN,KAAK;MAClC;IACF,CAAC,CAAC;IAEF,IAAI,CAACI,QAAQ,CAACG,EAAE,EAAE;MAChB,MAAM,IAAIJ,KAAK,CAAC,yBAAyBC,QAAQ,CAACI,MAAM,EAAE,CAAC;IAC7D;;IAEA;IACA,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACK,IAAI,CAAC,CAAC;IAClC,OAAOC,GAAG,CAACC,eAAe,CAACF,IAAI,CAAC;EAClC,CAAC,CAAC,OAAOG,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,uBAAuBhB,OAAO,GAAG,EAAEgB,KAAK,CAAC;IACvD,OAAO,EAAE,CAAC,CAAC;EACb;AACF,CAAC;;AAID;AACA;AACA;AACA;AACA;AACA,OAAO,MAAME,WAAW,GAAIC,SAAS,IAAK;EACxC,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEH,SAAS,CAAC;EAClC,OAAOzB,GAAG,CAAC6B,IAAI,CAAC,qBAAqB,EAAEH,QAAQ,EAAE;IAC/CV,OAAO,EAAE;MACP,cAAc,EAAE;IAClB;EACF,CAAC,CAAC;AACJ,CAAC;;AAGD;AACA;AACA;AACA;AACA,OAAO,MAAMc,iBAAiB,GAAGA,CAAA,KAAM;EACrC,OAAO9B,GAAG,CAACI,GAAG,CAAC,oCAAoC,CAAC;AACtD,CAAC;;AAGD;AACA;AACA;AACA;AACA,OAAO,MAAM2B,YAAY,GAAGA,CAAA,KAAM;EAChC,OAAO/B,GAAG,CAACI,GAAG,CAAC,2BAA2B,CAAC;AAC7C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,MAAM4B,WAAW,GAAI1B,OAAO,IAAK;EACtC,OAAON,GAAG,CAACiC,MAAM,CAAC,4BAA4B3B,OAAO,GAAG,CAAC;AAC3D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}